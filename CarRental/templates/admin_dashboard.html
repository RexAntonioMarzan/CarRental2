{% extends "base.html" %}
{% block title %}Admin Dashboard{% endblock %}

{% block content %}
<section class="card" style="padding: 24px; display: flex; flex-direction: column; gap: 20px;">
  <div style="display:flex; justify-content:space-between; align-items:center; gap:16px; flex-wrap:wrap;">
    <div>
      <h1 style="margin:0 0 4px;">Admin dashboard</h1>
      <p style="margin:0; color:var(--text-muted); font-size:14px;">
        Quick overview of fleet, bookings, and revenue.
      </p>
    </div>
    <div style="display:flex; gap:10px; flex-wrap:wrap;">
      <a href="{{ url_for('admin_cars') }}" class="btn secondary">Manage cars</a>
      <a href="{{ url_for('admin_bookings') }}" class="btn secondary">View bookings</a>
      <a href="{{ url_for('admin_users') }}" class="btn secondary">Users</a>
    </div>
  </div>

  <!-- Stats -->
  <div class="grid" style="grid-template-columns:repeat(auto-fit,minmax(180px,1fr)); gap:16px;">
    <div class="card" style="background:rgba(9,12,18,0.9); border-radius:14px; padding:14px;">
      <p style="font-size:12px; text-transform:uppercase; color:var(--text-muted); margin:0 0 4px;">Cars</p>
      <p style="font-size:28px; font-weight:700; margin:0;">{{ stats.car_count }}</p>
    </div>
    <div class="card" style="background:rgba(9,12,18,0.9); border-radius:14px; padding:14px;">
      <p style="font-size:12px; text-transform:uppercase; color:var(--text-muted); margin:0 0 4px;">Bookings</p>
      <p style="font-size:28px; font-weight:700; margin:0;">{{ stats.booking_count }}</p>
    </div>
    <div class="card" style="background:rgba(9,12,18,0.9); border-radius:14px; padding:14px;">
      <p style="font-size:12px; text-transform:uppercase; color:var(--text-muted); margin:0 0 4px;">Total revenue</p>
      <p style="font-size:24px; font-weight:700; margin:0;">₱{{ '{:,.2f}'.format(stats.revenue) }}</p>
    </div>
  </div>

  <!-- Recent bookings -->
  <section>
    <h2 style="font-size:18px; margin:10px 0 8px;">Recent bookings</h2>
    {% if recent_bookings %}
      <div style="overflow-x:auto;">
        <table style="width:100%; border-collapse:collapse; font-size:14px;">
          <thead>
            <tr style="text-align:left; border-bottom:1px solid rgba(255,255,255,0.1);">
              <th style="padding:8px;">ID</th>
              <th style="padding:8px;">User</th>
              <th style="padding:8px;">Car</th>
              <th style="padding:8px;">Days</th>
              <th style="padding:8px; text-align:right;">Total</th>
            </tr>
          </thead>
          <tbody>
            {% for b in recent_bookings %}
              <tr style="border-bottom:1px solid rgba(255,255,255,0.05);">
                <td style="padding:8px;">#{{ b.id }}</td>
                <td style="padding:8px;">{{ b.username }}</td>
                <td style="padding:8px;">{{ b.car_name }}</td>
                <td style="padding:8px;">{{ b.days }}</td>
                <td style="padding:8px; text-align:right;">₱{{ '{:,.2f}'.format(b.total_price) }}</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% else %}
      <p style="color:var(--text-muted); font-size:14px;">No bookings yet.</p>
    {% endif %}
  </section>
</section>
{% endblock %}